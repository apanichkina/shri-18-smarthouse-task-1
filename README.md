# shri-18-smarthouse-task-1

#### 1. Школа разработки интерфейсов - 2018 II / ДЗ - «Работа с сенсорным пользовательским вводом» 

**Для проверки:** [https://apanichkina.github.io/shri-18-smarthouse-task-1/](https://apanichkina.github.io/shri-18-smarthouse-task-1/)

**Проделанная работа:**
1. Для карточки с камерой добавлена обработака следующих событий: 'pointerdown','pointermove', 'pointerleave' см. `public/js/pointer.js`
2. Подключен полифил PEP от jquery для поддержки работоспособности через touch events
3. Реализовано 3 жеста: перемещение указателя вдоль осей X и Y (медленный свайп), вращение двумя указателями (rotate) и pinch (resize)
4. Я организовала всю обработку в классе `InteractiveElement`, который принимает в конструктор элемент ( в нашем случае картинку). В методе `init()` навешиваются обработчики на необходимые события. Обработчики (`onPointerDown, onPointerMove, onPointerLeave`)тоже являются методами класса, поскольку требуется работать с общим массивом активных событий (пльцев на экране) `this.pointers`. Методы, обрабатыващие жесты (`checkPinch, checkRotate, checkSwipe`) определяют по изменению координат тот ли это жест. Для соответствующих жестов вызываются методы **updateScale**, **updatePosition** или **updateFilter**, которые меняют css. 
5. Добавлены индикаторы яркости и зума
6. Зум может принимать значения от 1 до 10. Предполагается, что для видеонаблюдения кейс с уменьшением зума  менее 1 не актуален.
7. Довольно сложно далось примыкание краев картинки и видимой области (см `public/js/pointer.js updatePosition()`). Например: при зуме 1:1 нельзя перемещаться по оси Y. Если сум выше, то можно перемещать по вертикали, но только пока верхний край картинки не совпадет с верхней границей окна. 

**Что не удалось:** 
1. Не успела сделать контрол, который отображает положение видимой обрасти относительно всей картинки.
2. В последненей редакции rotate и pinch тяжело различимы. При неаккуратном ресайзе может измениться яркость и наоборот. _Предполагаемое решение:_ при срабатывании события на двух указателях проверять что сильнее изменилось (расстояние между пальцами или угол). При этом учитывать величину изменения угла можно не абсолютно, а с доп. коэффициентом, который пропорционален расстоянию между пальцами или иному параметру) 
3. При ресайзе фокус перемещается в середину картинки. Это связано с положением оси ноды. _Предполагемое решение:_ веред выставлением `scalе` перенести начало координат (`transform-origin`) в среднюю точку между пальцами.

--- 
##### [Лицензия](https://docviewer.yandex.ru/view/1130000031416187/?*=rPcLBpqhHesbYQxX%2BW33tN%2FZqbR7InVybCI6InlhLXdpa2k6Ly93aWtpLWFwaS55YW5kZXgucnUvc2hyaS0yMDE4LWlpL2hvbWV3b3JrL2FkYXB0aXZuYWphLXZqb3JzdGthL2xpY2Vuc2UucGRmIiwidGl0bGUiOiJsaWNlbnNlLnBkZiIsInVpZCI6IjExMzAwMDAwMzE0MTYxODciLCJ5dSI6IjgwMzgwNTc4MDE1MzMwNjc1MzciLCJub2lmcmFtZSI6ZmFsc2UsInRzIjoxNTM4NzYyOTYzMzA5fQ%3D%3D)



#### 2. Школа разработки интерфейсов - 2018 II / ДЗ - «Node js» 

## Текст задания
Написать сервер на express который будет подниматься на 8000 порту и обрабатывать два роута: 1. /status — должен выдавать время, прошедшее с запуска сервера в формате hh:mm:ss 2. /api/events — должен отдавать содержимое файла events.json. При передаче get-параметра type включается фильтрация по типам событий. При передаче некорректного type — отдавать статус 400 "incorrect type". (`/api/events?type=info:critical`) Все остальные роуты должны отдавать `<h1>Page not found</h1>`, с корректным статусом 404.


## Как запустить

`node v10.12.0`

`npm install`

`npm run server`

[http://localhost:8000](http://localhost:8000/api/events?type=info)

## Где искать код

Код сервера находится `server/server.js`, также в папке `server` лежат дополнительные модули, используемые для работы сервера.

По запросу `/api/events?type=info:critical` файл раздается из `server/hostedFiles/events.json`
